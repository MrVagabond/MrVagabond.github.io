# JVM垃圾回收



## 如何判断对象可以回收

1. 引用计数法

    > 回收条件：当一个对象的引用为0时，可以回收该对象
    >
    > 弊端：循环引用

2. 可达性分析法

    > 回收条件：当一个对象不可达时，可以回收该对象
    >
    > 算法流程：
    >
    > - 扫描堆中的对象，看是否能够沿着GC Root对象为起点的引用链找到该对象，如果找不到，表示可以回收
    > - 可以作为GC Root对象的对象集合包括
    >     - System Class（系统类对象）
    >     - Native Stack
    >     - Busy Monitor（正在加锁的对象，可以作为根对象）
    >     - Thread（活动线程中的栈帧中的局部引用变量指向的堆中的对象，可以作为根对象）
    > - 引用关系
    >     - 强引用：
    >     - 软引用
    >     - 弱引用
    >     - 虚引用
    >     - 终结器引用



## 垃圾回收算法

- 标记清除
    - 先标记，哪些对象是垃圾
    - 再清除，释放垃圾对象占用的空间
    - 优点：速度快，只需要把垃圾对象的起始终止地点做记录
    - 缺点：容易产生内存碎片
- 标记整理
    - 先标记，哪些对象是垃圾
    - 再整理，把可用的对象向前移动，使得内存更为紧凑
    - 优点：没有内存碎片
    - 缺点：效率低

- 复制
    - 把内存区域划分成两块大小相同的区域，
    - 先标记，哪些对象是垃圾
    - 将不是垃圾的对象复制到另一块区域，让将本区域直接清空
    - 优点：效率高，没有内存碎片
    - 缺点：占用双倍空间



## 分代垃圾回收算法

- 



## 垃圾回收器（JVM的实现）





## 垃圾回收调优



